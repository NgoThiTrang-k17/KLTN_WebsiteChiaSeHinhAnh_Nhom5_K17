<ion-header lines="none">
  <ion-searchbar *ngIf="!search" (keydown.enter)="onSearch($event)"></ion-searchbar>

  <ion-item *ngIf="search">
    <ion-searchbar (keydown.enter)="onSearch($event)"></ion-searchbar>
    <p (click)="unSearch()" style="margin-top: 5%;">Huỷ</p>
  </ion-item>
</ion-header>

<ion-content [fullscreen]="true">
  <div *ngIf="!search" style="text-align: center; justify-content: center; display:flex;">
    <ion-list class="card-columns">
      <div *ngFor="let post of posts">
        <ion-card class="card" slot="start">
          <ion-img class="img" [src]="post.path" routerLink="detail/{{post.id}}/{{post.ownerId}}"></ion-img>
          <ion-label style="margin-top:5px;" routerLink="detail/{{post.id}}/{{post.ownerId}}">{{post.title}}</ion-label>
          <ion-row>
            <ion-col size="10" style="text-align: left; justify-self: center; display: flex;">
              <ion-icon *ngIf="post.isReactedByThisUser==false" (click)="onCreateReaction(post.id)" name="heart-outline"></ion-icon>
              <ion-icon *ngIf="post.isReactedByThisUser==true" (click)="unReaction(post.id)" name="heart" style="color: rgba(255, 0, 0, 0.788);"></ion-icon>
              <span *ngIf="post.reactionCount!=0" style="margin-left: 1px; color:black;">{{post.reactionCount}}</span>
            </ion-col>
            <ion-col size="2">
              <ion-icon name="ellipsis-horizontal" style="color: black;"></ion-icon>
              <ion-select class="custom-options" interface="action-sheet">
                <ion-select-option >Tải xuống hình ảnh</ion-select-option>
                <ion-select-option >Báo cáo</ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>
        </ion-card>
      </div>
    </ion-list>
  </div>

  <div *ngIf="search">
    <ion-list *ngIf="!searchAccount" class="card-columns">
      <div *ngFor="let post of posts">
        <ion-card class="card" slot="start">
          <ion-img class="img" [src]="post.path" routerLink="detail/{{post.id}}/{{post.ownerId}}"></ion-img>
          <ion-label style="margin-top:5px;" routerLink="detail/{{post.id}}">{{post.title}}/{{post.ownerId}}</ion-label>
          <ion-row>
            <ion-col size="10" style="text-align: left; justify-self: center; display: flex;">
              <ion-icon *ngIf="post.isReactedByThisUser==false" (click)="onCreateReaction(post.id)" name="heart-outline"></ion-icon>
              <ion-icon *ngIf="post.isReactedByThisUser==true && post.reactionCount!=0" (click)="unReaction(post.id)" name="heart" style="color: rgba(255, 0, 0, 0.788);"></ion-icon>
              <span *ngIf="post.reactionCount!=0" style="margin-left: 1px; color: black;">{{post.reactionCount}}</span>
            </ion-col>
            <ion-col size="2">
              <ion-icon name="ellipsis-horizontal" style="color: black;"></ion-icon>
              <ion-select class="custom-options" interface="action-sheet">
                <ion-select-option >Tải xuống hình ảnh</ion-select-option>
                <ion-select-option >Báo cáo</ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>
        </ion-card>
      </div>
    </ion-list>
    <ion-list *ngIf="searchAccount">
      <div *ngFor="let account of accounts">
        <ion-item lines="none" slot="start">
          <ion-col size="2">

            <ion-avatar *ngIf="account.avatarPath!=null"><img [src]="account.avatarPath"></ion-avatar>
            <ion-avatar *ngIf="account.avatarPath==null"><img src="../../assets/images/default-profile.png"></ion-avatar>
          </ion-col>
          <ion-col size="6">
            <ion-label style="margin-left:5px;">{{account.name}}</ion-label>
            <span *ngIf = "(presence.onlineUsers$ | async).includes(account.id)">
              <ion-icon name="ellipse" style="color: blue; width: 15px; height: 15px;"></ion-icon>
            </span>
            <ion-label style="margin-left:5px; font-size: small; font-weight: 500;">2 người theo dõi</ion-label>
          </ion-col>
          <ion-col size="4" style="margin-right: 5px;">
            <ion-button *ngIf="account.isFollowedByCurrentUser==0" (click)="onCreateFollow(account.id)" class="unFollow" shape="round">Theo dõi</ion-button>
            <ion-button *ngIf="account.isFollowedByCurrentUser!=0" (click)="unFollow(account.id)" class="onFollow" shape="round">Đã theo dõi</ion-button>
          </ion-col>
        </ion-item>
      </div>
    </ion-list>
  </div>

  <!-- <app-explore-container name="Tab 1 page"></app-explore-container> -->
</ion-content>

